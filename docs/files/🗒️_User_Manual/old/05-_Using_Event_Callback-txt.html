<!DOCTYPE html>

<html class="NDPage NDContentPage"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>05. Using Event Callback.txt</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css" /><script type="text/javascript" src="../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.3 (Development Release 1) -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');">

<script type="text/javascript">var q = window.location.search;if (q.indexOf("?Theme=") == 0){var t = q.slice(7);var e = t.indexOf(";");if (e != -1){  t = t.slice(0, e);  }if (document.documentElement.className == undefined){ document.documentElement.className = t + "Theme"; }else{ document.documentElement.className += " " + t + "Theme"; }}</script>

<a name="🔊_Using_Event_Callback"></a><a name="Topic22"></a><div class="CTopic TSection LTextFile first">
 <div class="CTitle">🔊 Using Event Callback</div>
 <div class="CBody"><p>Until now, we have been using the &lt;ssGUIManager::AddPostGUIUpdateEventListener&gt; to react to any event/changes</p><p>by checking the status for all the GUI objects every frame.</p><p>This is fine for simple project or code base. But as the codebase grows 🌴, this quickly becomes unsustainable and non-performant.</p><p>This is especially true if the user has the ability to create new GUI Objects in runtime.</p></div>
</div>

<a name="❓_What_is_Event_Callback"></a><a name="Topic23"></a><div class="CTopic TSection LTextFile">
 <div class="CTitle">❓ What is Event Callback</div>
 <div class="CBody"><p>In essence, event callback allows you to assign more than 1 functions to a specific event in order to react to that event</p><p>before or after it has happened.</p><p>At the moment, the default event callbacks are slightly lacking and unorganized but this will be looked into in the future (hopefully 😅).</p><p>There are two types of event callback, inidcated by the name of it:</p><ul><li><p>OnSomeEventHappenEventCallback: This notifies any listener <b>before</b> an event is going to happen</p></li><li><p>SomeEventHappenedEventCallback: This notifies any listener <b>after</b> an event has just happened either immediately or in the same frame.</p></li></ul></div>
</div>

<a name="📥_Adding_event_callback_to_a_GUI_Object"></a><a name="Topic24"></a><div class="CTopic TSection LTextFile">
 <div class="CTitle">📥 Adding event callback to a GUI Object</div>
 <div class="CBody"><p>To create an event callback, we can just do this with <a href="../../../index.html#File:◀️_ssGUI_API_▶️/Factory.hpp:ssGUI.Factory.Create" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,2112);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ssGUI::Factory::Create</a>:</p><pre class="CText">auto focusLostEvent = ssGUI::Factory::Create&lt;ssGUI::EventCallbacks::FocusLostEventCallback&gt;();</pre><p>Then we can attach it to any GUI Objects like this:</p><pre class="CCode">ssGUI::Window window;<br /><br /><span class="SHComment">//...</span><br /><br /><span class="SHComment">//Add the event callback</span><br />auto focusLostEvent = ssGUI::Factory::Create&lt;ssGUI::EventCallbacks::FocusLostEventCallback&gt;();<br />window.AddEventCallback(focusLostEvent);</pre><pre class="CText">⚠️ Please note that you cannot add the same type of eventCallback multiple times on the same GUI Object</pre><p>Some of the GUI Objects already has some event callbacks attached since it is used internally.</p><p>This is often mentioned in that GUI Object's API, or in the constructor.</p><p>To check for a given event callback exists, you can use &lt;ssGUI::EventCallbackManager::IsAnyEventCallbackExist&gt;:</p><pre class="CCode">ssGUI::Window window;<br /><br /><span class="SHComment">//...</span><br /><br /><span class="SHComment">//Check if the event callback exists</span><br /><span class="SHKeyword">if</span>(window.IsAnyEventCallbackExist&lt;ssGUI::EventCallbacks::FocusLostEventCallback&gt;())<br />{<br />    <span class="SHComment">//....</span><br />}</pre><p>To remove a given event callback, you can use &lt;ssGUI::EventCallbackManager::RemoveAnyEventCallback&gt;:</p><pre class="CCode">ssGUI::Window window;<br /><br /><span class="SHComment">//...</span><br /><br /><span class="SHComment">//Remove the event callback if it exists</span><br />window.RemoveAnyEventCallbackExist&lt;ssGUI::EventCallbacks::FocusLostEventCallback&gt;();</pre></div>
</div>

<a name="👂_Adding_Listener_To_A_Event_Callback"></a><a name="Topic25"></a><div class="CTopic TSection LTextFile">
 <div class="CTitle">👂 Adding Listener To A Event Callback</div>
 <div class="CBody"><p>In order to add a listener to a event callback, we first need to get the pointer of it.</p><p>You can get a GUI object's event callback by calling &lt;ssGUI::EventCallbackManager::GetAnyEventCallback&gt;</p><pre class="CCode">ssGUI::Window window;<br /><br /><span class="SHComment">//...</span><br /><br /><span class="SHComment">//Get the event callback. If it doesn't exist, this will be a nullptr.</span><br />auto eventCallback = window.GetAnyEventCallback&lt;ssGUI::EventCallbacks::FocusLostEventCallback&gt;();</pre><p>To add a listener using lambda, you need to call &lt;ssGUI::EventCallbacks::EventCallback::AddEventListener&gt;:</p><pre class="CCode">ssGUI::Window window;<br /><br /><span class="SHComment">//...</span><br /><br /><span class="SHComment">//Get the event callback. If it doesn't exist, this will be a nullptr.</span><br />auto eventCallback = window.GetAnyEventCallback&lt;ssGUI::EventCallbacks::FocusLostEventCallback&gt;();<br /><br /><span class="SHComment">//Add a listener to this event.</span><br />eventCallback-&gt;AddEventListener<br />(<br />    <span class="SHString">&quot;AnyKey&quot;</span>,   <span class="SHComment">//The identifier for this listener.</span><br />                <span class="SHComment">//This is what you need to use in order do anything with this listener</span><br /><br />    <span class="SHComment">//source is what *triggered* the callback</span><br />    <span class="SHComment">//container is the GUI Object that this event callback is added to</span><br />    <span class="SHComment">//references are all the GUI object references this listener has, we will talk about this later.</span><br />    [](ssGUI::GUIObject* source, ssGUI::GUIObject* container, ssGUI::ObjectsReferences* references)<br />    {<br />        <span class="SHComment">//...</span><br />    }<br />);</pre><p>This is how you a listener using an object's function. The function signature must match:</p><pre class="CCode">#include &lt;functional&gt;   <span class="SHComment">//You will need to include this</span><br /><br /><span class="SHComment">//..</span><br /><br />ssGUI::Window window;<br /><br /><span class="SHComment">//...</span><br /><br />some::<span class="SHKeyword">class</span>* objectPointer = <span class="SHKeyword">new</span> some::<span class="SHKeyword">class</span>();  <span class="SHComment">//Create an object for some::class</span><br /><br /><span class="SHComment">//...</span><br /><br /><span class="SHComment">//Get the event callback. If it doesn't exist, this will be a nullptr.</span><br />auto eventCallback = window.GetAnyEventCallback&lt;ssGUI::EventCallbacks::FocusLostEventCallback&gt;();<br /><br /><span class="SHComment">//Add a listener to this event.</span><br />eventCallback-&gt;AddEventListener<br />(<br />    <span class="SHString">&quot;AnyKey&quot;</span>,   <span class="SHComment">//The identifier for this listener.</span><br />                <span class="SHComment">//This is what you need to use in order do anything with this listener</span><br /><br />    <span class="SHComment">//Using &lt;std::bind&gt; to bind an object's function to the listener callback</span><br />    std::bind(&amp;some::<span class="SHKeyword">class</span>::<span class="SHKeyword">function</span>, objectPointer, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3));<br />);</pre></div>
</div>

<a name="Example"></a><a name="Topic26"></a><div class="CTopic TSection LTextFile last">
 <div class="CTitle">Example</div>
 <div class="CBody"><p>Here's a full example of using event callback (Src/Examples/EventCallbackExample.cpp)</p><pre class="CCode">#include <span class="SHString">&quot;ssGUI/EventCallbacks/RecursiveChildAddedEventCallback.hpp&quot;</span><br />#include <span class="SHString">&quot;ssGUI/HeaderGroups/StandardGroup.hpp&quot;</span><br /><br /><br /><span class="SHComment">//Event callback example</span><br /><span class="SHKeyword">int</span> main()<br />{<br />    ssGUI::MainWindow mainWindow;<br /><br />    auto callback = ssGUI::Factory::Create&lt;ssGUI::EventCallbacks::RecursiveChildAddedEventCallback&gt;();<br />    callback-&gt;AddEventListener<br />    (<br />        <span class="SHString">&quot;AnyKey&quot;</span>,<br />        [](ssGUI::EventInfo info)<br />        {<br />            std::cout&lt;&lt;<span class="SHString">&quot;child added\n&quot;</span>;<br />        }<br />    );<br /><br />    mainWindow.AddEventCallback(callback);<br /><br />    <span class="SHComment">//Creating window</span><br />    ssGUI::Window window;<br />    window.SetSize(glm::vec2(<span class="SHNumber">400</span>, <span class="SHNumber">300</span>));<br />    window.SetPosition(glm::vec2(<span class="SHNumber">50</span>, <span class="SHNumber">200</span>));<br />    window.SetParent(&amp;mainWindow);     <span class="SHComment">//This should trigger the event callback</span><br /><br />    <span class="SHComment">//Creating ssGUIManager and run it</span><br />    ssGUI::ssGUIManager guiManager;<br />    guiManager.AddGUIObject((ssGUI::GUIObject*)&amp;mainWindow);<br />    guiManager.StartRunning();<br /><br />    <span class="SHKeyword">return</span> <span class="SHNumber">0</span>;<br />}</pre></div>
</div>

</body></html>