<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>4. Creating A Custom Widget Or Window.txt</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css" /><script type="text/javascript" src="../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.1.1 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Creating_A_Custom_Widget_Or_Window"></a><a name="Topic1050"></a><div class="CTopic TSection LTextFile first">
 <div class="CTitle">Creating A Custom Widget Or Window</div>
</div>

<a name="Header"></a><a name="Topic283"></a><div class="CTopic TSection LTextFile">
 <div class="CTitle">Header</div>
 <div class="CBody"><p>This is the header template for creating a custom widget. Just replace widget with window for custom window.&nbsp; (Remove the &quot;//&quot; for the C++ divider for Natural Docs to work properly when parsing)</p><pre>#ifndef SSGUI_CUSTOM_WIDGET<br />#define SSGUI_CUSTOM_WIDGET<br /><br />#include <span class="SHString">&quot;ssGUI/BaseClasses/Widget.hpp&quot;</span><br /><br /><span class="SHComment">//namespace: ssGUI</span><br /><span class="SHKeyword">namespace</span> ssGUI<br />{<br />    <span class="SHComment">/*class: CustomWidget</span><br /><span class="SHComment">    Your class description here.</span><br /><br /><span class="SHComment">    Variables &amp; Constructor:</span><br /><span class="SHComment">    //============================== C++ ==============================</span><br /><span class="SHComment">    private:</span><br /><span class="SHComment">        //Your variables go here</span><br /><span class="SHComment">    //=================================================================</span><br /><span class="SHComment">    //============================== C++ ==============================</span><br /><span class="SHComment">    Widget::Widget() :  Focused(false), Interactable(true), BlockInput(true)</span><br /><span class="SHComment">    {}</span><br /><span class="SHComment">    //=================================================================</span><br /><span class="SHComment">    */</span><br />    <span class="SHKeyword">class</span> CustomWidget : <span class="SHKeyword">public</span> Widget<br />    {<br />        <span class="SHKeyword">private</span>:<br />            <span class="SHComment">//Your variables go here</span><br /><br />            CustomWidget&amp; <span class="SHKeyword">operator</span>=(CustomWidget <span class="SHKeyword">const</span>&amp; other) = default;<br /><br />        <span class="SHKeyword">protected</span>:<br />            CustomWidget(CustomWidget <span class="SHKeyword">const</span>&amp; other);<br /><br />            <span class="SHKeyword">virtual void</span> ConstructRenderInfo() <span class="SHKeyword">override</span>;<br /><br />        <span class="SHKeyword">public</span>:<br />            CustomWidget();<br />            <span class="SHKeyword">virtual</span> ~CustomWidget() <span class="SHKeyword">override</span>;<br /><br />            <span class="SHComment">//function: GetType</span><br />            <span class="SHComment">//See &lt;Widget::GetType&gt;</span><br />            <span class="SHKeyword">virtual</span> ssGUI::Enums::GUIObjectType GetType() <span class="SHKeyword">const override</span>;<br /><br />            <span class="SHComment">//function: Delete</span><br />            <span class="SHComment">//See &lt;Widget::Delete&gt;</span><br />            <span class="SHKeyword">virtual void</span> Delete() <span class="SHKeyword">override</span>;<br /><br />            <span class="SHComment">//function: Internal_Draw</span><br />            <span class="SHComment">//See &lt;Widget::Internal_Draw&gt;</span><br />            <span class="SHKeyword">virtual void</span> Internal_Draw(ssGUI::Backend::BackendDrawingInterface* drawingInterface, ssGUI::GUIObject* mainWindow, glm::vec2 mainWindowPositionOffset) <span class="SHKeyword">override</span>;<br /><br />            <span class="SHComment">//function: Internal_Update</span><br />            <span class="SHComment">//See &lt;Widget::Internal_Update&gt;</span><br />            <span class="SHKeyword">virtual void</span> Internal_Update(ssGUI::Backend::BackendSystemInputInterface* inputInterface, ssGUI::InputStatus&amp; globalInputStatus, ssGUI::InputStatus&amp; windowInputStatus, ssGUI::GUIObject* mainWindow) <span class="SHKeyword">override</span>;<br /><br />            <span class="SHComment">//function: Clone</span><br />            <span class="SHComment">//See &lt;Widget::Clone&gt;</span><br />            <span class="SHKeyword">virtual</span> GUIObject* Clone(<span class="SHKeyword">bool</span> cloneChildren) <span class="SHKeyword">override</span>;<br />    };<br />}<br /><br />#endif</pre></div>
</div>

<a name="Source"></a><a name="Topic1101"></a><div class="CTopic TSection LTextFile last">
 <div class="CTitle">Source</div>
 <div class="CBody"><p>This is the source template for creating a custom widget. Just replace widget with window for custom window.</p><pre>#include <span class="SHString">&quot;ssGUI/BaseClasses/CustomWidget.hpp&quot;</span><br /><br />#include <span class="SHString">&quot;ssGUI/BaseClasses/MainWindow.hpp&quot;</span> <span class="SHComment">//For getting mouse position</span><br /><br /><span class="SHKeyword">namespace</span> ssGUI<br />{<br />    CustomWidget::CustomWidget(CustomWidget <span class="SHKeyword">const</span>&amp; other) : BaseGUIObject(other)<br />    {<br />        <span class="SHComment">//Copy the values here.</span><br />    }<br /><br />    <span class="SHComment">//You only need to override this when you are rendering anything.</span><br />    <span class="SHKeyword">void</span> CustomWidget::ConstructRenderInfo()<br />    {<br />        <span class="SHComment">//Get the top-left position of the widget</span><br />        glm::ivec2 drawPosition = GetGlobalPosition();<br /><br />        <span class="SHComment">//You can do you drawing here.</span><br />        <span class="SHComment">//You can get the rendering details with DrawingVerticies, DrawingUVs, DrawingColours, DrawingCounts and DrawingProperties</span><br />    }<br /><br />    CustomWidget::CustomWidget()<span class="SHComment">// : [Your variables constructions go here]</span><br />    {}<br /><br />    CustomWidget::~CustomWidget()<br />    {<br />        NotifyAndRemoveOnObjectDestroyEventCallbackIfExist();<br />        <span class="SHComment">//any claen-up put it here</span><br />    }<br /><br />    <span class="SHComment">//You don't have to override this. If you do want to return your own type,</span><br />    <span class="SHComment">//just edit the GUIObjectType and return it along with BASE_WIDGET</span><br />    ssGUI::Enums::GUIObjectType CustomWidget::GetType() <span class="SHKeyword">const</span><br />    {<br />        <span class="SHKeyword">return</span> ssGUI::Enums::GUIObjectType::BASE_WIDGET;<br />        <span class="SHComment">//return ssGUI::Enums::GUIObjectType::BASE_WIDGET | ssGUI::Enums::GUIObjectType::YOUR_OWN_TYPE;</span><br />    }<br /><br />    <span class="SHComment">//You don't have to override this. But if you have any claen-up put it here as well.</span><br />    <span class="SHKeyword">void</span> CustomWidget::Delete()<br />    {<br />        NotifyAndRemoveOnObjectDestroyEventCallbackIfExist();<br />        ssGUI::Widget::Delete();<br />    }<br /><br />    <span class="SHComment">//You only need to override this when you are rendering anything.</span><br />    <span class="SHKeyword">void</span> CustomWidget::Internal_Draw(ssGUI::Backend::BackendDrawingInterface* drawingInterface, ssGUI::GUIObject* mainWindow, glm::vec2 mainWindowPositionOffset)<br />    {<br />        FUNC_DEBUG_ENTRY();<br /><br />        <span class="SHKeyword">if</span>(!IsVisible())<br />        {<br />            FUNC_DEBUG_EXIT();<br />            <span class="SHKeyword">return</span>;<br />        }<br /><br />        <span class="SHKeyword">if</span>(Redraw)<br />        {<br />            DisableRedrawObjectRequest();<br /><br />            <span class="SHKeyword">for</span>(auto extension : ExtensionsDrawOrder)<br />                Extensions.at(extension)-&gt;Internal_Draw(<span class="SHKeyword">true</span>, drawingInterface, mainWindowP, mainWindowPositionOffset);<br /><br />            ConstructRenderInfo();<br /><br />            <span class="SHKeyword">for</span>(auto extension : ExtensionsDrawOrder)<br />                Extensions.at(extension)-&gt;Internal_Draw(<span class="SHKeyword">false</span>, drawingInterface, mainWindowP, mainWindowPositionOffset);<br /><br />            EnableRedrawObjectRequest();<br /><br />            drawingInterface-&gt;DrawEntities(DrawingVerticies, DrawingUVs, DrawingColours, DrawingCounts, DrawingProperties);<br />            CacheRendering();<br />            DrawingVerticies.clear();<br />            DrawingUVs.clear();<br />            DrawingColours.clear();<br />            DrawingCounts.clear();<br />            DrawingProperties.clear();<br />            Redraw = <span class="SHKeyword">false</span>;<br />        }<br />        <span class="SHKeyword">else</span><br />            drawingInterface-&gt;DrawEntities(LastDrawingVerticies, LastDrawingUVs, LastDrawingColours, LastDrawingCounts, LastDrawingProperties);<br /><br />        FUNC_DEBUG_EXIT();<br />    }<br /><br />    <span class="SHComment">//You only need to override this when you need to update the object</span><br />    <span class="SHKeyword">void</span> CustomWidget::Internal_Update(ssGUI::Backend::BackendSystemInputInterface* inputInterface, ssGUI::InputStatus&amp; globalInputStatus, ssGUI::InputStatus&amp; windowInputStatus, ssGUI::GUIObject* mainWindow)<br />    {<br />        FUNC_DEBUG_ENTRY();<br /><br />        <span class="SHComment">//If it is not visible, don't even update/draw it</span><br />        <span class="SHKeyword">if</span>(!IsVisible())<br />        {<br />            FUNC_DEBUG_EXIT();<br />            <span class="SHKeyword">return</span>;<br />        }<br /><br />        <span class="SHKeyword">for</span>(auto extension : ExtensionsUpdateOrder)<br />            Extensions.at(extension)-&gt;Internal_Update(<span class="SHKeyword">true</span>, inputInterface, globalInputStatus, windowInputStatus, mainWindow);<br /><br />        <span class="SHComment">//It will only block when BlockInput flag is true OR is interactable</span><br />        <span class="SHKeyword">if</span>(!IsBlockInput() || IsInteractable())<br />            <span class="SHKeyword">goto</span> endOfUpdate;<br /><br />        <span class="SHComment">//Mouse Input blocking</span><br />        <span class="SHKeyword">if</span>(windowInputStatus.MouseInputBlocked || globalInputStatus.MouseInputBlocked)<br />            <span class="SHKeyword">goto</span> endOfUpdate;<br /><br />        <span class="SHComment">//Mouse Input blocking</span><br />        {<br />            glm::ivec2 currentMousePos = inputInterface-&gt;GetCurrentMousePosition(dynamic_cast&lt;ssGUI::MainWindow*&gt;(mainWindow));<br /><br />            <span class="SHKeyword">bool</span> mouseInWindowBoundX = <span class="SHKeyword">false</span>;<br />            <span class="SHKeyword">bool</span> mouseInWindowBoundY = <span class="SHKeyword">false</span>;<br /><br />            <span class="SHKeyword">if</span>(currentMousePos.x &gt;= GetGlobalPosition().x &amp;&amp; currentMousePos.x &lt;= GetGlobalPosition().x + GetSize().x)<br />                mouseInWindowBoundX = <span class="SHKeyword">true</span>;<br /><br />            <span class="SHKeyword">if</span>(currentMousePos.y &gt;= GetGlobalPosition().y &amp;&amp; currentMousePos.y &lt;= GetGlobalPosition().y + GetSize().y)<br />                mouseInWindowBoundY = <span class="SHKeyword">true</span>;<br /><br />            <span class="SHComment">//Input blocking</span><br />            <span class="SHKeyword">if</span>(mouseInWindowBoundX &amp;&amp; mouseInWindowBoundY)<br />                windowInputStatus.MouseInputBlocked = <span class="SHKeyword">true</span>;<br /><br />            <span class="SHComment">//You can have your logic here</span><br />        }<br /><br />        endOfUpdate:;<br />        <span class="SHKeyword">for</span>(auto extension : ExtensionsUpdateOrder)<br />            Extensions.at(extension)-&gt;Internal_Update(<span class="SHKeyword">false</span>, inputInterface, globalInputStatus, windowInputStatus, mainWindow);<br /><br />        <span class="SHComment">//Check position different for redraw</span><br />        <span class="SHKeyword">if</span>(GetGlobalPosition() != LastGlobalPosition)<br />            RedrawObject();<br /><br />        LastGlobalPosition = GetGlobalPosition();<br /><br />        FUNC_DEBUG_EXIT();<br />    }<br /><br />    <span class="SHComment">//You will always need to override this in order to call the copy constructor</span><br />    GUIObject* CustomWidget::Clone(<span class="SHKeyword">bool</span> cloneChildren)<br />    {<br />        FUNC_DEBUG_ENTRY();<br />        CustomWidget* temp = <span class="SHKeyword">new</span> CustomWidget(*<span class="SHKeyword">this</span>);<br />        CloneExtensionsAndEventCallbacks(temp);<br /><br />        <span class="SHKeyword">if</span>(cloneChildren)<br />        {<br />            <span class="SHKeyword">if</span>(CloneChildren(<span class="SHKeyword">this</span>, temp) == nullptr)<br />            {<br />                FUNC_DEBUG_EXIT();<br />                <span class="SHKeyword">return</span> nullptr;<br />            }<br />        }<br /><br />        FUNC_DEBUG_EXIT();<br />        <span class="SHKeyword">return</span> temp;<br />    }<br />}</pre></div>
</div>

</body></html>