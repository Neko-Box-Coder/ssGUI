<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>6. Event Callback Class.txt</title><link rel="stylesheet" type="text/css" href="../../styles/main.css" /><script type="text/javascript" src="../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.1.1 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Event_Callback_Class"></a><a name="Topic17"></a><div class="CTopic TSection LTextFile first">
 <div class="CTitle">Event Callback Class</div>
 <div class="CBody"><p>Event Callback is one of the building blocks of ssGUI. There are a number of event callbacks that comes with ssGUI, some of them are automatically added by extension or GUI Object itself.</p><p>As mentioned before, you should <b>ALWAYS</b> create an event callback object on the <b>heap</b>.</p><p>The actual implementation of event callback is in <a href="../../index.html#File:ssGUI/EventCallbacks/BaseEventCallback.hpp:BaseEventCallback" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,237);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >BaseEventCallback</a> class and every class that derives from it are just providing a name for you to identify it.</p><p>_</p><p>There are two types of event callbacks:</p><ul><li><p>The first one is for an event that has <b>already happened</b>. This is shown in the name with <b>past-tense</b> such as MinMaxSize*Changed*EventCallback</p></li><li><p>The second one is for an event that <b>will happen</b> and normally you have some sort of way to stop this event from happening. Again, this is shown in the name with <b>present-tense</b>.</p></li></ul><p>A good example for this is Window*Close*EventCallback.</p><p>_</p><p>To actually use an event callback, we need to create it first.</p><pre>ssGUI::EventCallbacks::MinMaxSizeChangedEventCallback* eventCallback = new ssGUI::EventCallbacks::MinMaxSizeChangedEventCallback();</pre><p>_</p><p>ssGUI uses C++ functional header in order to hook a function to the event callback.&nbsp; The first parameter reprensents the object that <b>causes</b> the event which is passed as a GUIObject pointer.</p><p>For example, if <a href="../../index.html#File:ssGUI/EventCallbacks/RecursiveChildrenAddedEventCallback.hpp:RecursiveChildrenAddedEventCallback" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,222);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >RecursiveChildrenAddedEventCallback</a> is added to a parent and then an object is added as a child to this parent.</p><p>Then the <b>child</b> is the one that causes the event.</p><ul><li><p>To link a Lambda to the event callback:</p></li></ul><pre><span class="SHKeyword">int</span> eventIndex = eventCallback-&gt;AddEventListener<br />(<br />    [&amp;](ssGUIObject* source)<br />    {<br />        std::cout&lt;&lt;<span class="SHString">&quot;called\n&quot;</span>;<br />    }<br />);</pre><ul><li><p>To link an object function to the event callback:</p></li></ul><pre><span class="SHKeyword">int</span> eventIndex = eventCallback-&gt;AddEventListener<br />(<br />    std::bind(&amp;some::<span class="SHKeyword">class</span>::<span class="SHKeyword">function</span>, objectPointer, std::placeholders::_1)<br />);</pre><ul><li><p>To link just a function:</p></li></ul><pre>int eventIndex = eventCallback-&gt;AddEventListener(&amp;someFunc);</pre><p><a href="../../index.html#File:ssGUI/EventCallbacks/EventCallback.hpp:EventCallback.AddEventListener" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,278);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >EventCallback::AddEventListener</a> returns a callback index where you can use to remove the callback later if you wish. Like this:</p><pre>eventCallback-&gt;RemoveEventListener(eventIndex);</pre><p>_</p><p>Well, it is useless if you just create an event callback and not attach it to any GUI object.</p><p>This can be done by:</p><pre>someObject.AddEventCallback(eventCallback);</pre><p><u>Do not add the same type of event callback if there's one existed already.</u></p><p>You can check if an event callback exists or not by passing the name of the specific type of event you want to check to <a href="../../index.html#File:ssGUI/BaseClasses/GUIObject.hpp:GUIObject.IsEventCallbackExist" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,988);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >GUIObject::IsEventCallbackExist</a></p><p>For example, if you want to check if <a href="../../index.html#File:ssGUI/EventCallbacks/MinMaxSizeChangedEventCallback.hpp:MinMaxSizeChangedEventCallback" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,339);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >MinMaxSizeChangedEventCallback</a> has been added to <u>someObject</u> or not:</p><pre>someObject.IsEventCallbackExist(MinMaxSizeChangedEventCallback::EVENT_NAME);</pre><p>_</p><p>Similarly if you want to remove an event callback, you can:</p><pre>someObject.RemoveEventCallback(MinMaxSizeChangedEventCallback::EVENT_NAME);</pre><p>_</p><p>If you have created a custom event callback and want to notify the event callback whenever an event happens:</p><pre>eventCallback.Notify(callerPointer);</pre><p><a href="../../index.html#File:ssGUI/EventCallbacks/EventCallback.hpp:EventCallback.Notify" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,724);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >EventCallback::Notify</a> takes a GUIObject pointer that reprensents the object that <b>causes</b> the event.</p><p>Note that you don't need to implement the logic for notifying the default event callbacks.</p><p>_</p><p>Here's an example:</p><pre><span class="SHKeyword">int</span> main()<br />{<br />    ssGUI::MainWindow mainWindow;<br /><br />    ssGUI::EventCallbacks::RecursiveChildrenAddedEventCallback* callback = <span class="SHKeyword">new</span> ssGUI::EventCallbacks::RecursiveChildrenAddedEventCallback();<br />    callback-&gt;AddEventListener<br />    (<br />        [&amp;](ssGUI::GUIObject* source)<br />        {<br />            std::cout&lt;&lt;<span class="SHString">&quot;child added\n&quot;</span>;<br />        }<br />    );<br /><br />    mainWindow.AddEventCallback(callback);<br /><br />    <span class="SHComment">//Creating window</span><br />    ssGUI::Window window;<br />    window.SetBackgroundColour(glm::u8vec4(<span class="SHNumber">127</span>, <span class="SHNumber">127</span>, <span class="SHNumber">127</span>, <span class="SHNumber">255</span>));<br />    window.SetSize(glm::ivec2(<span class="SHNumber">150</span>, <span class="SHNumber">150</span>));<br />    window.SetParentP(&amp;mainWindow);     <span class="SHComment">//This should trigger the event callback</span><br /><br />    <span class="SHComment">//Creating ssGUIManager and run it</span><br />    ssGUI::ssGUIManager guiManager;<br />    guiManager.AddGUIObject((ssGUI::GUIObject*)&amp;mainWindow);<br />    guiManager.StartRunning();<br /><br />    <span class="SHKeyword">return</span> <span class="SHNumber">0</span>;<br />}</pre></div>
</div>

</body></html>